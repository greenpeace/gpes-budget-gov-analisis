<script src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    google.charts.load('current', {
        'packages': ['treemap'],
        language: 'es'
    });

</script>

<div id="chart_div" style="width: 100%; height: 400px;"></div>
<p><small>Haz clic para ver con más detalle y right-click para ver general</small></p>

<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Location', 'Parent', 'Importe (tamaño)', '(color)'],
                ['Ingresos del Estado 2018', null, 0, 0],

                ['Impuestos directos y cotizaciones sociales', 'Ingresos del Estado 2018', 0, 0],
                ['Impuestos indirectos', 'Ingresos del Estado 2018', 0, 0],
                ['Tasas y otros ingresos', 'Ingresos del Estado 2018', 0, 0],
                ['Ingresos medioambientales y energéticos', 'Ingresos del Estado 2018', 0, 0],

                ['IRPF', 'Impuestos directos y cotizaciones sociales', 66519000000, 0],
                ['Impuestos sobre el capital', 'Impuestos directos y cotizaciones sociales', 200000000, 0],
                ['Cotizaciones sociales', 'Impuestos directos y cotizaciones sociales', 963522050, 0],

                ['IVA', 'Impuestos indirectos', 33052000000, 0],
                ['Otros impuestos indirectos', 'Impuestos indirectos', 6766912460, 0],

                ['Tasas', 'Tasas y otros ingresos', 840000000, 0],
                ['Ingresos por prestación de servicios', 'Tasas y otros ingresos', 445370950, 0],
                ['Ingresos patrimoniales, transferencias de capital y otros', 'Tasas y otros ingresos', 24448242910, 0],

                ['Impuesto sobre la producción de combustible nuclear', 'Ingresos medioambientales y energéticos', 275000000, 0],
                ['Impuesto sobre carbón', 'Ingresos medioambientales y energéticos', 308000000, 0],
                ['Sobre los Gases Fluorados de Efecto Invernadero ', 'Ingresos medioambientales y energéticos', 100000000, 100],
                ['Canon hidráulico', 'Ingresos medioambientales y energéticos', 220000000, 100],
                ['Sobre el valor de la producción de la energía eléctrica', 'Ingresos medioambientales y energéticos', 1533000000, 0],
                ['Sobre hidrocarburos', 'Ingresos medioambientales y energéticos', 4544864800, 0],
                ['Sobre la electricidad ', 'Ingresos medioambientales y energéticos', 175500000, 0],
                ['Subasta de derechos de emisión', 'Ingresos medioambientales y energéticos', 410000000, 0]

            ]);

            tree = new google.visualization.TreeMap(document.getElementById('chart_div'));

            var options = {

                minColor: '#8EE5BB',
                midColor: '#FF4D16',
                maxColor: '#FF4D16',

                title: 'Ingresos del Estado',
                titleTextStyle: {
                    color: '#000',
                    fontName: '"Work Sans",sans-serif',
                    fontSize: 16,
                    bold: true,
                    italic: false
                },

                textStyle: {
                    color: '#000',
                    fontName: '"Work Sans",sans-serif',
                    fontSize: 13,
                    bold: false,
                    italic: false
                },

                headerColor: '#ddd',
                headerHeight: 30,

                fontFamily: '"Work Sans",sans-serif',
                fontSize: 13,
                fontColor: '#000',

                showScale: false,
                highlightOnMouseOver: false,
                showTooltips: true,
                generateTooltip: showFullTooltip
            };

            tree.draw(data, options);

            function showFullTooltip(row, size, value) {
                return '<div style="background:#fff; padding:10px; border: 1px solid">' +
                    '<span>' + data.getValue(row, 0) + '<br>' + size.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") + ' €' +
                    ' </div>';
            }

        }
    });

</script>
